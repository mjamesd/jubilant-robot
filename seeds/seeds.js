const sequelize = require('../config/connection');
const aaLogo = require('asciiart-logo');
const { User, Post, Comment } = require('../models'); // ~/models/index.js

const userData = require('./users.json');
const postData = require('./posts.json');
const commentData = require('./comments.json');


const seedDatabase = async () => {
    await sequelize.sync({force: true}); // force:true = drop all tables and restart from scratch

    await User.bulkCreate(userData, {
        individualHooks: true,
        returning: true, // append RETURNING <model columns> to get back all defined values (https://sequelize.org/master/class/lib/model.js~Model.html#static-method-bulkCreate) <--- to get autogenerated IDs
    });
    console.log(aaLogo({ name: 'Users Seeded!' }).render());

    await Post.bulkCreate(postData);
    console.log(aaLogo({ name: 'Posts Seeded!' }).render());

    await Comment.bulkCreate(commentData);
    console.log(aaLogo({ name: 'Comments Seeded!' }).render());
    
    process.exit(0);
}

seedDatabase();